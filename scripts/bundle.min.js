"use strict";function cloudinary(e){e.config({upload_endpoint:"https://api.cloudinary.com/v1_1/",cloud_name:"casamarela"})}function localise(e,a,t){a.addPart(t.part.global),a.addPart(t.part.dashboard),a.addPart(t.part.gallery),a.addPart(t.part.contact),e.useLoader("$translatePartialLoader",{urlTemplate:"./translations/{lang}/{part}.min.json"}),e.preferredLanguage(t.lang.pt),e.useSanitizeValueStrategy("sanitizeParameters")}function setLocalisedLanguage(e,a,t){var r=e.get(t.locale);r?a.use(r):(a.use(il8n.lang.pt),e.put(t.locale,il8n.lang.pt))}function setTheme(e){e.definePalette("CNPalette",{50:"000000",100:"000000",200:"000000",300:"000000",400:"000000",500:"00C983",600:"009C81",700:"000000",800:"000000",900:"000000",A100:"000000",A200:"000000",A400:"000000",A700:"000000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"]}),e.theme("default")}function routes(e,a,t){a.html5Mode({enabled:!0}),e.state("dashboard",{url:"/",title:"Inicio",controller:"DashboardCtrl",controllerAs:"ctrl",templateUrl:"views/dashboard.html"}).state("gallery",{url:"/gallery",title:"Gallery",controller:"GalleryCtrl",controllerAs:"ctrl",templateUrl:"views/gallery.html"}).state("gallery.brand",{url:"/:brand",title:"Gallery",controller:"GalleryCtrl",controllerAs:"ctrl",templateUrl:"views/gallery.html"}).state("stores",{url:"/stores",title:"Stores",controller:"StoresCtrl",controllerAs:"ctrl",templateUrl:"views/stores.html"}).state("contact",{url:"/contact",title:"Contact",controller:"ContactCtrl",controllerAs:"ctrl",templateUrl:"views/contact.html"}).state("about",{url:"/about",title:"About",templateUrl:"views/about.html"}).state("blog",{url:"/press",title:"Press"}),t.otherwise("/")}function setPageTitle(e,a,t){e.$on("$stateChangeSuccess",function(a,t){e.pageTitle="",t.title&&(e.pageTitle+=t.title,e.pageTitle+=" — "),e.pageTitle+=AppSettings.appTitle})}function multiScroll(){return{restrict:"EA",replace:!0,templateUrl:"views/modules/multiscroll.html",scope:{panels:"="},controller:MultiScrollCtrl}}function MultiScrollCtrl(e,a,t,r,l,n){angular.element(document).ready(function(){function a(e,a,t){4!==e&&"up"===t&&r.cancel(l),4===a&&r.cancel(l)}angular.element(t).multiscroll({easing:"linear",scrollingSpeed:500,loopBottom:!0,css3:!0,onLeave:a});var l=r(function(){$.fn.multiscroll.moveSectionDown()},5e3);e.$on("$destroy",function(){r.cancel(l),$.fn.multiscroll.destroy()})})}function bgImage(e){return{link:function a(t,r,l){angular.element(".spinner-wrapper").removeClass("hide"),l.$observe("bgImage",function(){if(l.bgImage){var a=new Image;a.src=l.bgImage,a.onload=function(){e(function(){angular.element(".spinner-wrapper").addClass("hide"),r.addClass("is-ready")},500),r.css("background-image","url("+l.bgImage+")")},a.onerror=function(){r.css("background-image","url("+t.defaultImage+")")}}else r.css("background-image","url("+t.defaultImage+")")})}}}function broadcastService(){return{dashboardReady:!1,galleryReady:!1}}function safeUrl(e,a){return function(a){return e.trustAsResourceUrl("http://res.cloudinary.com/casamarela/image/upload/q_60,w_400,c_fill,dpr_2.0,f_auto/"+a)}}function GlobalCtrl(e,a,t,r,l,n,o,i,s,c,d,u,p,g,m,f,b){function h(e){o.use(e),s.put(c.locale,e),L.selectedLocale=e}function v(){C("right"),T("Presented!")}function y(e){d(e).toggle()}function C(e){d(e).close()}function S(){return[{id:"anna-campbell",name:"Anna Campbell"},{id:"raimon-bundo",name:"Raimon Bundo"},{id:"rosa-clara",name:"Rosa Clara"},{id:"san-patrick",name:"San Patrick"},{id:"yolan-cris",name:"Yolan Cris"}]}function w(){var e=l[c.dashboard],a=l[c.gallery];return e&&a}function P(e,a){if("dashboard"===a){var t=[];angular.forEach(e,function(e,a){t.push(e)}),l[c.dashboard]=t,b.dashboardReady=!0}if("gallery"===a){var r={};angular.forEach(e,function(e,a){r[a]=e.sort(A)}),l[c.gallery]=r,b.galleryReady=!0}}function A(e,a){return e.name<a.name?-1:e.name>a.name?1:0}function x(e){var a=e?3800:1500;p(function(){angular.element("#wrapper").addClass("is-ready"),angular.element(".spinner-wrapper").addClass("hide")},a)}var L=this,T=n.debug,I=n.info,R=n.error;L.locales=i.lang,L.selectedLocale=s.get(c.locale),L.brands=S();var O=firebase.database().ref(),k=u(O);L.changeLocale=h,L.presentContactForm=v,L.toggleSidenav=y,L.closeSideNav=C,a.$on("$stateChangeStart",function(e,a){var t="/"===g.current.url||"^"===g.current.url,r=-1!==g.current.url.indexOf("gallery")||-1!==g.current.url.indexOf("brand")||"^"===g.current.url,l="/"===a.url,n=-1!==a.url.indexOf("gallery")||-1!==a.url.indexOf("brand");(!t&&l||!r&&n)&&(b.dashboardReady=!0,b.galleryReady=!0,angular.element(".spinner-wrapper").removeClass("hide"),angular.element("#wrapper").addClass("loading"),p(function(){angular.element(".spinner-wrapper").addClass("hide"),angular.element("#wrapper").removeClass("loading")},1200))}),function e(){if(w())return b.dashboardReady=!0,b.galleryReady=!0,void x();k.$loaded().then(function(){angular.forEach(k,function(e,a){P(e,a)})}),x(!0)}()}function DashboardCtrl(e,a,t,r,l,n,o,i,s,c){function d(e){n(function(){u.sliderPanels=e},0)}var u=this,p=t.debug,g=t.info,m=t.error,f=firebase.database().ref(),b=r(f),h=i[s.dashboard];u.sliderPanels=null,a.$watch(function(){return c.dashboardReady},function(e){e&&(h=i[s.dashboard],d(h))},!0)}function GalleryCtrl(e,a,t,r,l,n,o,i,s,c,d,u,p,g,m,f){function b(){var e=document.querySelector(".mix-container");e&&angular.element(document).ready(function(){R=mixitup(e,{pagination:{limit:10,loop:!0,hidePageListIfSinglePage:!0},animation:{duration:250,nudge:!0,reverseOut:!1,effects:"fade translateZ(-100px)"},templates:{pagerNext:'<button type="button" class="${classNames}" data-page="next"><md-icon class="material-icons md-18" aria-label="next page of images">navigate_next</md-icon></button>',pagerPrev:'<button type="button" class="${classNames}" data-page="prev"><md-icon class="material-icons md-18" aria-label="previous page of images">navigate_before</md-icon></button>'},callbacks:{onMixEnd:function e(){O=new Blazy({container:".gallery",success:function e(){$(".gallery").trigger("touchstart")}})}}}),R.filter("all"),R.sort("name")})}function h(e){if(R&&R.destroy(),O&&O.destroy(),I=c[d.gallery],e){var a=e.replace("-","_");w(!0,I[a]),A.slides=I[a]}else w(!1,I),A.slides=S(I);b()}function v(e){A.filterOptionTitle=e}function y(e,a){m.show({controller:["$mdDialog",function(e){function t(){e.cancel()}var r=this;r.image=a.image,r.name=a.name,r.brand=a.brand,r.credits=a.credit,r.close=t}],controllerAs:"ctrl",templateUrl:"views/modules/lightbox.tpl.html",parent:angular.element(document.body),openFrom:"#"+e,clickOutsideToClose:!0,fullscreen:!0})}function C(e){return e.replace(/\//g,"-")}function S(e){var a=[];return angular.forEach(e,function(e,t){angular.forEach(e,function(e,r){var l={collection:t,image:e.image,title:e.title,brand:e.brand,name:e.name,credits:e.credit?e.credit:null};a.push(l)})}),a}function w(e,a){var t={};v(),e?angular.forEach(a,function(e,a){t[e.collection]=e.title}):angular.forEach(a,function(e,a){var r=a.replace("_"," ");t[a]=r}),A.slideOptions=t}function P(){var e;u.params.brand&&(e=u.params.brand.replace("-"," ")),A.pageTitle=e}var A=this,x=r.debug,L=r.info,T=r.error,I=c[d.gallery],R,O;A.filterOptionTitle=null,t.$watch(function(){return f.galleryReady},function(e){e&&(I=c[d.gallery],h(u.params.brand))},!0),t.$on("$stateChangeSuccess",function(){I&&(o(function(){h(u.params.brand)},500),o(function(){P(),angular.element(".spinner-wrapper").addClass("hide"),angular.element("#wrapper").removeClass("loading")},1200))}),t.$on("$stateChangeStart",function(){R&&R.destroy(),O&&O.destroy(),angular.element(".spinner-wrapper").removeClass("hide"),angular.element("#wrapper").addClass("loading")}),A.updateFilterOption=v,A.showLightbox=y,A.formatId=C}function StoresCtrl(e,a,t,r,l,n){function o(e){s.selectedStore=s.stores[e],s.selectedStoreIdx=e}function i(){return[{name:"São Paulo",telephone:{display:"+55 11 3061-0239",link:"+551130610239"},coords:[-23.5672487,-46.663629],imageUrl:"/images/layout/sp-store.jpg",address:{line1:"R. Peixoto Gomide, 1801A - Casa 3",line2:"Jardim Paulista, São Paulo - SP",line3:"01409-003, Brasil"}},{name:"Campinas",telephone:{display:"+55 19 3254-4091",link:"+551932544091"},coords:[-22.9032346,-47.0497935],imageUrl:"/images/layout/cp-store.jpg",address:{line1:"R. Maria Monteiro, 54",line2:"Cambuí, Campinas - SP",line3:"13025-150, Brasil"}},{name:"Piracicaba",telephone:{display:"+55 19 3413-5879",link:"+551934135879"},coords:[-22.7331892,-47.6542594],imageUrl:"/images/layout/store-placeholder.jpg",address:{line1:"Rua Boa Morte, 1984",line2:"Centro, Piracicaba - SP",line3:"13400-140, Brasil"}}]}var s=this,c=a.debug,d=a.info,u=a.error,p=firebase.database().ref(),g=t(p);s.stores=i(),s.selectedStore=s.stores[0],s.selectedStoreIdx=0,o(s.selectedStoreIdx),s.selectStore=o,e.$on("$stateChangeSuccess",function(){angular.element(".spinner-wrapper").addClass("hide"),angular.element("#wrapper").removeClass("loading"),n.getMap({id:"gmap"}).then(function(e){google.maps.event.trigger(e,"resize")})})}function ContactCtrl(e,a,t,r,l){function n(e){i.isLoading=!0,t({method:"POST",url:"server/mailer.php",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){i.formData={},i.isLoading=!1,o(s.success)},function(){i.isLoading=!1,o(s.error)})}function o(e){var a=e?l.instant("contact.success"):l.instant("contact.error");r.show(r.simple().textContent(a).position("bottom right").hideDelay(3e3))}var i=this;i.processForm=n,i.isLoading=!1,i.formData={};var s={success:1,error:0}}var FirebaseSettings={apiKey:"AIzaSyDl44OOmw9HVALFWrCyH4XZQEnlf8eBVBc",authDomain:"casamarela-44487.firebaseapp.com",databaseURL:"https://casamarela-44487.firebaseio.com",storageBucket:"casamarela-44487.appspot.com",messagingSenderId:"443654916126"},AppSettings={appTitle:"Casamarela"},il8n={part:{global:"global",dashboard:"dashboard",gallery:"gallery",contact:"contact"},lang:{pt:"pt",en:"en",es:"es",fr:"fr"}},storage={locale:"locale",dashboard:"dashboard",gallery:"gallery"},required=["ngMaterial","ui.router","md.data.table","firebase","angular-cloudinary","pascalprecht.translate","ngCookies","ngSanitize","ngStorage","ngMap","app.directives","app.services","app.filters"],app=angular.module("app",required);firebase.initializeApp(FirebaseSettings),app.constant("FirebaseSettings",FirebaseSettings),app.constant("il8n",il8n),app.constant("Storage",storage),app.config(["$stateProvider","$locationProvider","$urlRouterProvider",routes]),app.config(["cloudinaryProvider",cloudinary]),app.config(["$translateProvider","$translatePartialLoaderProvider","il8n",localise]),app.config(["$mdThemingProvider",setTheme]),app.controller("GlobalCtrl",GlobalCtrl),app.controller("DashboardCtrl",DashboardCtrl),app.controller("GalleryCtrl",GalleryCtrl),app.controller("StoresCtrl",StoresCtrl),app.controller("ContactCtrl",ContactCtrl),app.run(["$rootScope","$state","$stateParams",setPageTitle]),app.run(["$cookies","$translate","Storage",setLocalisedLanguage]);var app=angular.module("app.directives",[]);app.directive("multiScroll",[multiScroll]),MultiScrollCtrl.$inject=["$scope","$window","$element","$interval","$state","$timeout"];var app=angular.module("app.directives");app.directive("bgImage",["$timeout",bgImage]);var app=angular.module("app.services",[]);app.factory("BroadcastService",[broadcastService]);var app=angular.module("app.filters",[]);app.filter("safeUrl",["$sce","$timeout",safeUrl]),GlobalCtrl.$inject=["$scope","$rootScope","$location","$localStorage","$sessionStorage","$log","$translate","il8n","$cookies","Storage","$mdSidenav","$firebaseObject","$timeout","$state","$window","$stateParams","BroadcastService"],DashboardCtrl.$inject=["$rootScope","$scope","$log","$firebaseObject","$translate","$timeout","$localStorage","$sessionStorage","Storage","BroadcastService"],GalleryCtrl.$inject=["$rootScope","$location","$scope","$log","$firebaseObject","$translate","$timeout","$stateParams","$localStorage","$sessionStorage","Storage","$state","$filter","il8n","$mdDialog","BroadcastService"],StoresCtrl.$inject=["$scope","$log","$firebaseObject","$translate","$timeout","NgMap"],ContactCtrl.$inject=["$scope","$log","$http","$mdToast","$translate"];